<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="utf8">
<title>Hoop</title>

<!--
http://scratchblocks.github.io/generator/

Copyright 2013, Tim Radvan
@license MIT
http://opensource.org/licenses/MIT
-->

<link rel="stylesheet" href="scratchblocks2/scratchblocks2.css">

</head><body>
<h1>Hoop</h1>

Variables:
<ul>
<li>hoop direction x</li>
<li>hoop direction y</li>
<li>hoop position x</li>
<li>hoop position y</li>
<li>is clone</li>
<li>time initializer</li>
<li>time to reach ship</li>
</ul>

Sounds:
<ul>
<li><a href="../sox/explosion.wav">explosion</a></li>
<li><a href="../sox/pass.wav">pass</a></li>
</ul>

<p>
<img src="../gimp/hoop.png" />
</p>

<div>
<a href="http://scratchblocks.github.io/#when%20I%20receive%20%5Bcreate%20tunnel%20v%5D%0Aset%20%5Bghost%20v%5D%20effect%20to%20(100)%0Ago%20to%20front%0Apoint%20in%20direction%20(45%20v)%0Aset%20%5Btime%20initializer%20v%5D%20to%20%5B15.5%5D%0Arepeat%20(15)%0A%20%20%20%20create%20clone%20of%20%5Bmyself%20v%5D%0A%20%20%20%20turn%20ccw%20(90)%20degrees%0A%20%20%20%20change%20%5Btime%20initializer%20v%5D%20by%20(-0.5)%0Aend%0A%0A%0Awhen%20I%20receive%20%5Bclear%20tunnel%20v%5D%0Aset%20%5Bhoop%20position%20x%20v%5D%20to%20%5B0%5D%0Aset%20%5Bhoop%20position%20y%20v%5D%20to%20%5B0%5D%0Aset%20%5Bhoop%20direction%20x%20v%5D%20to%20%5B0%5D%0Aset%20%5Bhoop%20direction%20y%20v%5D%20to%20%5B0%5D%0Aset%20%5Btime%20to%20reach%20ship%20v%5D%20to%20(time%20initializer)%0Aset%20%5Bghost%20v%5D%20effect%20to%20(100)%0Ashow%0Aset%20volume%20to%20(sound%20volume)%25%0A%0A%0Awhen%20I%20receive%20%5Bpaint%20v%5D%0Apaint%20hoop%20from%20ship%20((time%20to%20reach%20ship)%20-%20(time))%0A%0A%0Adefine%20paint%20hoop%20from%20cam%20(time%20to%20cam)%20and%20ship%20(time%20to%20ship)%0Aset%20size%20to%20((50)%20%2F%20(time%20to%20cam))%25%0Aif%20%3C(time%20to%20ship)%20%3E%20%5B0%5D%3E%20then%0A%20%20%20%20set%20%5Bghost%20v%5D%20effect%20to%20((14)%20*%20(time%20to%20ship))%0Aelse%0A%20%20%20%20set%20%5Bghost%20v%5D%20effect%20to%20((-450)%20*%20(time%20to%20ship))%0Aend%0Ago%20to%20x%3A((((hoop%20position%20x)%20-%20(ship%20position%20x))%20-%20((ship%20direction%20x)%20*%20(time%20to%20ship)))%20%2F%20(time%20to%20cam))%20y%3A((((hoop%20position%20y)%20-%20(ship%20position%20y))%20-%20((ship%20direction%20y)%20*%20(time%20to%20ship)))%20%2F%20(time%20to%20cam))%0A%0A%0Adefine%20paint%20hoop%20from%20ship%20(time%20to%20ship)%0Apaint%20hoop%20from%20cam%20((0.6)%20%2B%20(time%20to%20ship))%20and%20ship%20(time%20to%20ship)%0A%0A%0Adefine%20pass%20ship%20(time%20to%20ship)%0Aif%20%3C%3C(time%20to%20reach%20ship)%20%3D%20(front%20hoop)%3E%20and%20%3C(time%20to%20ship)%20%3C%20%5B0%5D%3E%3E%20then%0A%20%20%20%20change%20%5Bfront%20hoop%20v%5D%20by%20(0.5)%0A%20%20%20%20touch%20ship%20(((hoop%20position%20x)%20-%20(ship%20position%20x))%20-%20((hoop%20direction%20x)%20*%20(time%20to%20ship)))%20(((hoop%20position%20y)%20-%20(ship%20position%20y))%20-%20((hoop%20direction%20y)%20*%20(time%20to%20ship)))%0Aend%0Aif%20%3C%3C(time%20to%20reach%20ship)%20%3C%20(front%20hoop)%3E%20and%20%3C(time%20to%20ship)%20%3C%20%5B-0.2%5D%3E%3E%20then%0A%20%20%20%20change%20%5Btime%20to%20reach%20ship%20v%5D%20by%20(8)%0A%20%20%20%20set%20%5Bhoop%20position%20x%20v%5D%20to%20(tunnel%20position%20x)%0A%20%20%20%20set%20%5Bhoop%20position%20y%20v%5D%20to%20(tunnel%20position%20y)%0A%20%20%20%20set%20%5Bhoop%20direction%20x%20v%5D%20to%20(tunnel%20direction%20x)%0A%20%20%20%20set%20%5Bhoop%20direction%20y%20v%5D%20to%20(tunnel%20direction%20y)%0A%20%20%20%20broadcast%20%5Btunnel%20to%20back%20v%5D%20and%20wait%0A%20%20%20%20go%20back%20(0)%20layers%0A%20%20%20%20calculate%20bend%0Aend%0A%0A%0Awhen%20I%20receive%20%5Bpass%20v%5D%0Apass%20ship%20((time%20to%20reach%20ship)%20-%20(time))%0A%0A%0Adefine%20calculate%20bend%0Aif%20%3C%3C(state)%20%3E%20%5B3%5D%3E%20and%20%3C((SCORE)%20mod%20(5))%20%3D%20%5B1%5D%3E%3E%20then%0A%20%20%20%20if%20%3C((SCORE)%20mod%20(100))%20%3E%20%5B85%5D%3E%20then%0A%20%20%20%20%20%20%20%20set%20%5Btunnel%20bend%20x%20v%5D%20to%20%5B0%5D%0A%20%20%20%20%20%20%20%20set%20%5Btunnel%20bend%20y%20v%5D%20to%20%5B0%5D%0A%20%20%20%20else%0A%20%20%20%20%20%20%20%20set%20%5Btunnel%20bend%20x%20v%5D%20to%20(((6)%20%2B%20((12)%20*%20(stage)))%20*%20(pick%20random%20(-1)%20to%20(1)))%0A%20%20%20%20%20%20%20%20set%20%5Btunnel%20bend%20y%20v%5D%20to%20(((6)%20%2B%20((12)%20*%20(stage)))%20*%20(pick%20random%20(-1)%20to%20(1)))%0A%20%20%20%20end%0Aend%0Achange%20%5Btunnel%20direction%20x%20v%5D%20by%20(tunnel%20bend%20x)%0Achange%20%5Btunnel%20direction%20y%20v%5D%20by%20(tunnel%20bend%20y)%0Achange%20%5Btunnel%20position%20x%20v%5D%20by%20((0.5)%20*%20(tunnel%20direction%20x))%0Achange%20%5Btunnel%20position%20y%20v%5D%20by%20((0.5)%20*%20(tunnel%20direction%20y))%0A%0A%0Adefine%20touch%20ship%20(difference%20x)%20(difference%20y)%0Aif%20%3C(state)%20%3D%20%5B4%5D%3E%20then%0A%20%20%20%20if%20%3C(((difference%20x)%20*%20(difference%20x))%20%2B%20((difference%20y)%20*%20(difference%20y)))%20%3C%20%5B6000%5D%3E%20then%0A%20%20%20%20%20%20%20%20play%20sound%20%5Bpass%20v%5D%0A%20%20%20%20%20%20%20%20change%20%5BSCORE%20v%5D%20by%20(1)%0A%20%20%20%20%20%20%20%20if%20%3C(HIGH%20SCORE)%20%3C%20(SCORE)%3E%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20set%20%5BHIGH%20SCORE%20v%5D%20to%20(SCORE)%0A%20%20%20%20%20%20%20%20end%0A%20%20%20%20%20%20%20%20if%20%3C((SCORE)%20mod%20(100))%20%3D%20%5B3%5D%3E%20then%0A%20%20%20%20%20%20%20%20%20%20%20%20change%20%5Bstage%20v%5D%20by%20(1)%0A%20%20%20%20%20%20%20%20%20%20%20%20broadcast%20%5Benter%20stage%20v%5D%0A%20%20%20%20%20%20%20%20end%0A%20%20%20%20%20%20%20%20go%20to%20front%0A%20%20%20%20else%0A%20%20%20%20%20%20%20%20play%20sound%20%5Bexplosion%20v%5D%0A%20%20%20%20%20%20%20%20set%20%5Bstate%20v%5D%20to%20%5B5%5D%0A%20%20%20%20%20%20%20%20broadcast%20%5Bexplode%20v%5D%0A%20%20%20%20end%0Aend">Scratchblocks URL</a>
</div>
<div>
<a href="hoop.txt">Scratchblocks generated textual code</a>
</div>

<pre class="blocks"><div class="sb2">
<div class="script"><div class="hat events">when I receive <div class="dropdown">create tunnel</div></div><div class="stack looks">set <div class="dropdown">ghost</div> effect to <div class="number">100</div></div><div class="stack looks">go to front</div><div class="stack motion">point in direction <div class="number-dropdown">45</div></div><div class="stack variables">set <div class="dropdown">time initializer</div> to <div class="string">15.5</div></div><div class="cwrap"><div class="stack control cstart">repeat <div class="number">15</div></div><div class="cmouth control"><div class="stack control">create clone of <div class="dropdown">myself</div></div><div class="stack motion">turn <span class="arrow-ccw"><span>â†º</span></span> <div class="number">90</div> degrees</div><div class="stack variables">change <div class="dropdown">time initializer</div> by <div class="number">-0.5</div></div></div><div class="stack control cend"></div></div></div>
<div class="script"><div class="hat events">when I receive <div class="dropdown">clear tunnel</div></div><div class="stack variables">set <div class="dropdown">hoop position x</div> to <div class="string">0</div></div><div class="stack variables">set <div class="dropdown">hoop position y</div> to <div class="string">0</div></div><div class="stack variables">set <div class="dropdown">hoop direction x</div> to <div class="string">0</div></div><div class="stack variables">set <div class="dropdown">hoop direction y</div> to <div class="string">0</div></div><div class="stack variables">set <div class="dropdown">time to reach ship</div> to <div class="reporter variables">time initializer</div></div><div class="stack looks">set <div class="dropdown">ghost</div> effect to <div class="number">100</div></div><div class="stack looks">show</div><div class="stack sound">set volume to <div class="reporter variables">sound volume</div> %</div></div>
<div class="script"><div class="hat events">when I receive <div class="dropdown">paint</div></div><div class="stack custom">paint hoop from ship <div class="embedded operators"><div class="reporter variables">time to reach ship</div> - <div class="reporter variables">time</div></div></div></div>
<div class="script"><div class="define-hat custom">define<div class="outline">paint hoop from cam <div class="reporter custom-arg">time to cam</div> and ship <div class="reporter custom-arg">time to ship</div></div></div><div class="stack looks">set size to <div class="embedded operators"><div class="number">50</div> / <div class="reporter custom-arg">time to cam</div></div> %</div><div class="cwrap"><div class="stack control cstart">if <div class="boolean operators"><div class="reporter custom-arg">time to ship</div> &gt; <div class="string">0</div></div> then</div><div class="cmouth control"><div class="stack looks">set <div class="dropdown">ghost</div> effect to <div class="embedded operators"><div class="number">14</div> * <div class="reporter custom-arg">time to ship</div></div></div></div><div class="stack control celse">else</div><div class="cmouth control"><div class="stack looks">set <div class="dropdown">ghost</div> effect to <div class="embedded operators"><div class="number">-450</div> * <div class="reporter custom-arg">time to ship</div></div></div></div><div class="stack control cend"></div></div><div class="stack motion">go to x: <div class="embedded operators"><div class="embedded operators"><div class="embedded operators"><div class="reporter variables">hoop position x</div> - <div class="reporter variables">ship position x</div></div> - <div class="embedded operators"><div class="reporter variables">ship direction x</div> * <div class="reporter custom-arg">time to ship</div></div></div> / <div class="reporter custom-arg">time to cam</div></div> y: <div class="embedded operators"><div class="embedded operators"><div class="embedded operators"><div class="reporter variables">hoop position y</div> - <div class="reporter variables">ship position y</div></div> - <div class="embedded operators"><div class="reporter variables">ship direction y</div> * <div class="reporter custom-arg">time to ship</div></div></div> / <div class="reporter custom-arg">time to cam</div></div></div></div>
<div class="script"><div class="define-hat custom">define<div class="outline">paint hoop from ship <div class="reporter custom-arg">time to ship</div></div></div><div class="stack custom">paint hoop from cam <div class="embedded operators"><div class="number">0.6</div> + <div class="reporter custom-arg">time to ship</div></div> and ship <div class="reporter custom-arg">time to ship</div></div></div>
<div class="script"><div class="define-hat custom">define<div class="outline">pass ship <div class="reporter custom-arg">time to ship</div></div></div><div class="cwrap"><div class="stack control cstart">if <div class="boolean operators"><div class="boolean operators"><div class="reporter variables">time to reach ship</div> = <div class="reporter variables">front hoop</div></div> and <div class="boolean operators"><div class="reporter custom-arg">time to ship</div> &lt; <div class="string">0</div></div></div> then</div><div class="cmouth control"><div class="stack variables">change <div class="dropdown">front hoop</div> by <div class="number">0.5</div></div><div class="stack custom">touch ship <div class="embedded operators"><div class="embedded operators"><div class="reporter variables">hoop position x</div> - <div class="reporter variables">ship position x</div></div> - <div class="embedded operators"><div class="reporter variables">hoop direction x</div> * <div class="reporter custom-arg">time to ship</div></div></div> <div class="embedded operators"><div class="embedded operators"><div class="reporter variables">hoop position y</div> - <div class="reporter variables">ship position y</div></div> - <div class="embedded operators"><div class="reporter variables">hoop direction y</div> * <div class="reporter custom-arg">time to ship</div></div></div></div></div><div class="stack control cend"></div></div><div class="cwrap"><div class="stack control cstart">if <div class="boolean operators"><div class="boolean operators"><div class="reporter variables">time to reach ship</div> &lt; <div class="reporter variables">front hoop</div></div> and <div class="boolean operators"><div class="reporter custom-arg">time to ship</div> &lt; <div class="string">-0.2</div></div></div> then</div><div class="cmouth control"><div class="stack variables">change <div class="dropdown">time to reach ship</div> by <div class="number">8</div></div><div class="stack variables">set <div class="dropdown">hoop position x</div> to <div class="reporter variables">tunnel position x</div></div><div class="stack variables">set <div class="dropdown">hoop position y</div> to <div class="reporter variables">tunnel position y</div></div><div class="stack variables">set <div class="dropdown">hoop direction x</div> to <div class="reporter variables">tunnel direction x</div></div><div class="stack variables">set <div class="dropdown">hoop direction y</div> to <div class="reporter variables">tunnel direction y</div></div><div class="stack events">broadcast <div class="dropdown">tunnel to back</div> and wait</div><div class="stack looks">go back <div class="number">0</div> layers</div><div class="stack custom">calculate bend</div></div><div class="stack control cend"></div></div></div>
<div class="script"><div class="hat events">when I receive <div class="dropdown">pass</div></div><div class="stack custom">pass ship <div class="embedded operators"><div class="reporter variables">time to reach ship</div> - <div class="reporter variables">time</div></div></div></div>
<div class="script"><div class="define-hat custom">define<div class="outline">calculate bend</div></div><div class="cwrap"><div class="stack control cstart">if <div class="boolean operators"><div class="boolean operators"><div class="reporter variables">state</div> &gt; <div class="string">3</div></div> and <div class="boolean operators"><div class="embedded operators"><div class="reporter variables">SCORE</div> mod <div class="number">5</div></div> = <div class="string">1</div></div></div> then</div><div class="cmouth control"><div class="cwrap"><div class="stack control cstart">if <div class="boolean operators"><div class="embedded operators"><div class="reporter variables">SCORE</div> mod <div class="number">100</div></div> &gt; <div class="string">85</div></div> then</div><div class="cmouth control"><div class="stack variables">set <div class="dropdown">tunnel bend x</div> to <div class="string">0</div></div><div class="stack variables">set <div class="dropdown">tunnel bend y</div> to <div class="string">0</div></div></div><div class="stack control celse">else</div><div class="cmouth control"><div class="stack variables">set <div class="dropdown">tunnel bend x</div> to <div class="embedded operators"><div class="embedded operators"><div class="number">6</div> + <div class="embedded operators"><div class="number">12</div> * <div class="reporter variables">stage</div></div></div> * <div class="embedded operators">pick random <div class="number">-1</div> to <div class="number">1</div></div></div></div><div class="stack variables">set <div class="dropdown">tunnel bend y</div> to <div class="embedded operators"><div class="embedded operators"><div class="number">6</div> + <div class="embedded operators"><div class="number">12</div> * <div class="reporter variables">stage</div></div></div> * <div class="embedded operators">pick random <div class="number">-1</div> to <div class="number">1</div></div></div></div></div><div class="stack control cend"></div></div></div><div class="stack control cend"></div></div><div class="stack variables">change <div class="dropdown">tunnel direction x</div> by <div class="reporter variables">tunnel bend x</div></div><div class="stack variables">change <div class="dropdown">tunnel direction y</div> by <div class="reporter variables">tunnel bend y</div></div><div class="stack variables">change <div class="dropdown">tunnel position x</div> by <div class="embedded operators"><div class="number">0.5</div> * <div class="reporter variables">tunnel direction x</div></div></div><div class="stack variables">change <div class="dropdown">tunnel position y</div> by <div class="embedded operators"><div class="number">0.5</div> * <div class="reporter variables">tunnel direction y</div></div></div></div>
<div class="script"><div class="define-hat custom">define<div class="outline">touch ship <div class="reporter custom-arg">difference x</div> <div class="reporter custom-arg">difference y</div></div></div><div class="cwrap"><div class="stack control cstart">if <div class="boolean operators"><div class="reporter variables">state</div> = <div class="string">4</div></div> then</div><div class="cmouth control"><div class="cwrap"><div class="stack control cstart">if <div class="boolean operators"><div class="embedded operators"><div class="embedded operators"><div class="reporter custom-arg">difference x</div> * <div class="reporter custom-arg">difference x</div></div> + <div class="embedded operators"><div class="reporter custom-arg">difference y</div> * <div class="reporter custom-arg">difference y</div></div></div> &lt; <div class="string">6000</div></div> then</div><div class="cmouth control"><div class="stack sound">play sound <div class="dropdown">pass</div></div><div class="stack variables">change <div class="dropdown">SCORE</div> by <div class="number">1</div></div><div class="cwrap"><div class="stack control cstart">if <div class="boolean operators"><div class="reporter variables">HIGH SCORE</div> &lt; <div class="reporter variables">SCORE</div></div> then</div><div class="cmouth control"><div class="stack variables">set <div class="dropdown">HIGH SCORE</div> to <div class="reporter variables">SCORE</div></div></div><div class="stack control cend"></div></div><div class="cwrap"><div class="stack control cstart">if <div class="boolean operators"><div class="embedded operators"><div class="reporter variables">SCORE</div> mod <div class="number">100</div></div> = <div class="string">3</div></div> then</div><div class="cmouth control"><div class="stack variables">change <div class="dropdown">stage</div> by <div class="number">1</div></div><div class="stack events">broadcast <div class="dropdown">enter stage</div></div></div><div class="stack control cend"></div></div><div class="stack looks">go to front</div></div><div class="stack control celse">else</div><div class="cmouth control"><div class="stack sound">play sound <div class="dropdown">explosion</div></div><div class="stack variables">set <div class="dropdown">state</div> to <div class="string">5</div></div><div class="stack events">broadcast <div class="dropdown">explode</div></div></div><div class="stack control cend"></div></div></div><div class="stack control cend"></div></div></div>
</div></pre>

</body></html>
